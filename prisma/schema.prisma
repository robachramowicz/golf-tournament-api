// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

// *** RUN MIGRATIONS ***
// docker compose run app npx prisma migrate dev --name init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user { 
  id            Int             @id @default(autoincrement())
  username      String          @unique
  password      String
  group_members  group_members[]
}

model groups {
  id              Int                @id @default(autoincrement())
  group_name      String
  scoring_type    String
  draft_type      String
  draft_complete  Boolean            @default(false)
  draft_started   Boolean            @default(false)
  year            Int
  group_members   group_members[]
  tournament_id   String
}

model group_members {
  id        Int                @id @default(autoincrement())
  member    user               @relation(fields: [member_id], references: [id])
  member_id Int
  group     groups             @relation(fields: [group_id], references: [id])
  group_id  Int
  team_name String
  players   group_players[]
}

model group_players {
  id               Int              @id @default(autoincrement())
  group_member     group_members    @relation(fields: [group_member_id], references: [id])
  group_member_id  Int
  player_id        Int
}
